# @CXXFLAGS@     : is set to -g -Wall (when debuging) or -O2 -Wall (when not)
# @all_includes@ : is set to all needed include paths for QT, KDE and X11
# -I../..        : needed for config.h
CXXFLAGS= @CXXFLAGS@ -DHAVE_CONFIG_H -I../..

# @LDFLAGS@    : is set to -s (when not debuging) for stripping
# @all_libra.@ : is set to all needed libraries paths for QT, KDE and X11
# you need also @LIBSOCKET@, if you link with -lkfm
LDFLAGS	= @LDFLAGS@

# both are clear, I think
CXX     = @CXX@
MOC   	= @MOC@

############# INSTALL #################

install = @INSTALL@
INSTALL = $(install) -m 0755
INSTALL_DATA = $(install) -m 0644
INSTALL_DIR = $(install) -d -m 0755
INSTALL_DIR_PRIVATE = $(install) -d -m 0700

prefix = @prefix@
KDEINC = $(prefix)/include
BINDIR = $(prefix)/bin
LIBDIR = $(prefix)/lib
PICSDIR = $(LIBDIR)/pics

########### File Formats ###########

.SUFFIXES: .cpp

.cc.o:
	$(CXX) -c $(CXXFLAGS) $<

########## Files #####################

OBJECTS = midiout.o player.o track.o midimapper.o midfile.o dattypes.o \
 midistat.o deviceman.o synthout.o main.o
TARGET	= consolekmid 

######### build rules ################

all: Makefile $(TARGET)

Makefile: Makefile.in
	cd ../.. && CONFIG_FILES=kmid/player/$@ CONFIG_HEADERS= $(SHELL) ./config.status

$(TARGET): $(OBJECTS)
	$(CXX) $(OBJECTS) -o $(TARGET) $(LDFLAGS)

all_copy : midiout.o track.o midfile.o player.o dattypes.o midimapper.o \
 midistat.o deviceman.o synthout.o
	cp midiout.o ..
	cp track.o ..
	cp midfile.o ..
	cp player.o ..
	cp dattypes.o ..
	cp midimapper.o ..
	cp midistat.o ..
	cp deviceman.o ..
	cp synthout.o ..

clean:
	rm -f $(OBJECTS)
	rm -f $(TARGET)

distclean: clean
	rm -f Makefile

# DO NOT DELETE THIS LINE -- make depend depends on it.
